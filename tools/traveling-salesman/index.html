<!DOCTYPE html>
<html>
  <head>
    <title>jsyang.ca</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.30.2" />

<title>TSP Solver :: jsyang.ca</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/tools/traveling-salesman/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    
  

    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "http:\/\/jsyang.ca\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/cycling/" class="dd-item">
      <a href="/cycling/">
        <span>
          Cycling
          (13)
        </span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/cycling/moulton-automatic/" class="dd-item">
        <a href="/cycling/moulton-automatic/">
          <span>Modernizing a Moulton Automatic</span>
        </a>
    </li>
      <li data-nav-id="/cycling/tiny-wasp-bike/" class="dd-item">
        <a href="/cycling/tiny-wasp-bike/">
          <span>Building a tiny bike</span>
        </a>
    </li>
      <li data-nav-id="/cycling/iow-2017/" class="dd-item">
        <a href="/cycling/iow-2017/">
          <span>Isle of Wight Randonnee 2017</span>
        </a>
    </li>
      <li data-nav-id="/cycling/suoman-commute-machine/" class="dd-item">
        <a href="/cycling/suoman-commute-machine/">
          <span>suoman commute machine</span>
        </a>
    </li>
      <li data-nav-id="/cycling/norfolk-nobbler/" class="dd-item">
        <a href="/cycling/norfolk-nobbler/">
          <span>Norfolk Nobbler 2017</span>
        </a>
    </li>
      <li data-nav-id="/cycling/mcr-critmass/" class="dd-item">
        <a href="/cycling/mcr-critmass/">
          <span>Manchester Critical Mass February 2017</span>
        </a>
    </li>
      <li data-nav-id="/cycling/free-spirit-single-speed/" class="dd-item">
        <a href="/cycling/free-spirit-single-speed/">
          <span>Free Spirit Single-Speed Conversion</span>
        </a>
    </li>
      <li data-nav-id="/cycling/dahon-classic-v/" class="dd-item">
        <a href="/cycling/dahon-classic-v/">
          <span>Dahon Classic V</span>
        </a>
    </li>
      <li data-nav-id="/cycling/london-cambridge-leicester/" class="dd-item">
        <a href="/cycling/london-cambridge-leicester/">
          <span>London-Cambridge-Leicester</span>
        </a>
    </li>
      <li data-nav-id="/cycling/equipment-upgrades-2/" class="dd-item">
        <a href="/cycling/equipment-upgrades-2/">
          <span>Equipment Upgrades</span>
        </a>
    </li>
      <li data-nav-id="/cycling/dels-red-minivelo/" class="dd-item">
        <a href="/cycling/dels-red-minivelo/">
          <span>Del&#39;s Red Minivelo</span>
        </a>
    </li>
      <li data-nav-id="/cycling/cycling-2015/" class="dd-item">
        <a href="/cycling/cycling-2015/">
          <span>Cycling in 2015</span>
        </a>
    </li>
      <li data-nav-id="/cycling/london-to-brighton/" class="dd-item">
        <a href="/cycling/london-to-brighton/">
          <span>London to Brighton Ride</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/games/" class="dd-item">
      <a href="/games/">
        <span>
          Games
          (3)
        </span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/games/celcom/" class="dd-item">
        <a href="/games/celcom/">
          <span>Celestial Combat</span>
        </a>
    </li>
      <li data-nav-id="/games/gdw1/" class="dd-item">
        <a href="/games/gdw1/">
          <span>Gamedev Weekend 1</span>
        </a>
    </li>
      <li data-nav-id="/games/jscc/" class="dd-item">
        <a href="/games/jscc/">
          <span>DOM-based RTS Engine</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/art/" class="dd-item">
      <a href="/art/">
        <span>
          Art
          (8)
        </span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/art/polymer-clay-2017/" class="dd-item">
        <a href="/art/polymer-clay-2017/">
          <span>Polymer clay sculpting</span>
        </a>
    </li>
      <li data-nav-id="/art/particle-tracks/" class="dd-item">
        <a href="/art/particle-tracks/">
          <span>Particle Tracks</span>
        </a>
    </li>
      <li data-nav-id="/art/pewpew/" class="dd-item">
        <a href="/art/pewpew/">
          <span>PewPew.js</span>
        </a>
    </li>
      <li data-nav-id="/art/cellular-automata/" class="dd-item">
        <a href="/art/cellular-automata/">
          <span>Random Cellular Automata</span>
        </a>
    </li>
      <li data-nav-id="/art/maze/" class="dd-item">
        <a href="/art/maze/">
          <span>Generative Mazes</span>
        </a>
    </li>
      <li data-nav-id="/art/raygun/" class="dd-item">
        <a href="/art/raygun/">
          <span>Raygun</span>
        </a>
    </li>
      <li data-nav-id="/art/sculpting-2013/" class="dd-item">
        <a href="/art/sculpting-2013/">
          <span>Sculpting in 2012, 2013</span>
        </a>
    </li>
      <li data-nav-id="/art/tunnel/" class="dd-item">
        <a href="/art/tunnel/">
          <span>Textured 3D tunnel</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/tools/" class="dd-item parent">
      <a href="/tools/">
        <span>
          Tools
          (7)
        </span>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/tools/gpx-mapfactor/" class="dd-item">
        <a href="/tools/gpx-mapfactor/">
          <span>GPXMapFactor</span>
        </a>
    </li>
      <li data-nav-id="/tools/slackson/" class="dd-item">
        <a href="/tools/slackson/">
          <span>Slackson bot</span>
        </a>
    </li>
      <li data-nav-id="/tools/traveling-salesman/" class="dd-item active">
        <a href="/tools/traveling-salesman/">
          <span>TSP Solver</span>
        </a>
    </li>
      <li data-nav-id="/tools/road-signs/" class="dd-item">
        <a href="/tools/road-signs/">
          <span>Road signs</span>
        </a>
    </li>
      <li data-nav-id="/tools/colorrunbot/" class="dd-item">
        <a href="/tools/colorrunbot/">
          <span>ColorRun.pl bot</span>
        </a>
    </li>
      <li data-nav-id="/tools/gmbrowser/" class="dd-item">
        <a href="/tools/gmbrowser/">
          <span>GMBrowser</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/repairs/" class="dd-item">
      <a href="/repairs/">
        <span>
          Repairs
          (2)
        </span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/repairs/notes/" class="dd-item">
        <a href="/repairs/notes/">
          <span>TechShop notes</span>
        </a>
    </li>
      <li data-nav-id="/repairs/m2kb/" class="dd-item">
        <a href="/repairs/m2kb/">
          <span>IBM M2 Clicky Keyboard Repair</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/hacks/" class="dd-item">
      <a href="/hacks/">
        <span>
          Hacks
          (2)
        </span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/hacks/bike-bell-mod/" class="dd-item">
        <a href="/hacks/bike-bell-mod/">
          <span>Cheap Bike Bell Modification</span>
        </a>
    </li>
      <li data-nav-id="/hacks/foldable-boat/" class="dd-item">
        <a href="/hacks/foldable-boat/">
          <span>Foldable rowboat v1</span>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/hikes/" class="dd-item">
      <a href="/hikes/">
        <span>
          Hikes
          (1)
        </span><i class="fa fa-angle-right fa-lg category-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/hikes/alice-holt-forest/" class="dd-item">
        <a href="/hikes/alice-holt-forest/">
          <span>Alice Holt Forest (30km)</span>
        </a>
    </li>
        </ul>
    </li>



        <section id="shortcuts">
                <li class="" role=""><a href="https://twitter.com/spacefishing" target="_blank" rel="noopener"><hr><i class='fa fa-twitter'></i> @spacefishing</a></li>
                <li class="" role=""><a href="https://github.com/jsyang" target="_blank" rel="noopener"><i class='fa fa-github'></i> jsyang</a></li>
                <li class="" role=""><a href="https://www.youtube.com/user/jsyangca/videos" target="_blank" rel="noopener"><i class='fa fa-youtube'></i> jsyangca</a></li>
                <li class="" role=""><a href="https://medium.com/@spacefishing" target="_blank" rel="noopener"><i class='fa fa-medium'></i> @spacefishing</a></li>
        </section>

    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='/'>jsyang.ca</a> > <a href='/tools/'>Tools</a> > TSP Solver

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper"> 
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#iteratively-solving-the-travelling-salesman-problem-with-k-opt-operations">Iteratively solving the Travelling Salesman problem with k-opt operations</a></li>
<li><a href="#source-code">Source code</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>TSP Solver</h1>
    
    <div style="font-size: 0.8em; text-align:right">2011-08-01</div>
    
  



    
    
    
    

<blockquote>
<p>The travelling salesman problem (TSP) asks the following question: &ldquo;Given a list of cities and the distances between each pair of cities, what is the shortest possible route that visits each city exactly once and returns to the origin city?&rdquo; It is an NP-hard problem in combinatorial optimization, important in operations research and theoretical computer science.</p>
</blockquote>

<h3 id="iteratively-solving-the-travelling-salesman-problem-with-k-opt-operations">Iteratively solving the Travelling Salesman problem with k-opt operations</h3>

<p><img src="/images/tsp/tsp-demo-1.png" alt="1" /></p>

<pre><code class="language-text">Fast operations such as 2-Opt are less computationally expensive, but due to
granularity, more likely to become stuck in local extrema. The higher level
operations such as 3- or 4-Opt are less likely to be trapped in the extrema.

Parallelization, if permitted in the solution, also reduces the runtime cost.

Sept. 17, 2010  Original implementation
Apr.   4, 2011	Removed dependency on raphael.js; refactored everything.
                Created a more detailed README.

--------------------------------------------------------------------------------
Object		Description

Loc			Location - predefines some aspect of the distance of the tour.
			Contains a distance function specific to this geometry: Euclidean.

Tour		Essentially a sequence of Locations. The tour distance is a
			function of its Location visit sequence.
			Can also replace the current sequence if a new sequence has an
			improved tour distance.

--------------------------------------------------------------------------------
Heuristic	Description

CLUSTER     Group locations into clusters (neighborhoods) and optimize the graph
            within the clusters in parallel.

2-FLIP      Reverses a subsequence of the tour.
3-MOVE      Moves a subsequence within a sequence.
3-SPLIT     Splits a sequence into 2 sequences each carried out in parallel.
4-SWAP      Swap 2 subsequences from different Tours.

--------------------------------------------------------------------------------
2-Opt: FLIP operation

    Reverse a selected portion of the original Tour. For example:

       Head
     _/_                                  Interior
    |   |      Body                     - B - C - D - E -
         _____/_____
        |           |     Tail            Exterior
                         /              A -  ..  F -
                        |
        i           j          2-OPT      Interior reversed
    A - B - C - D - E - F      ----&gt;    A - E - D - C - B - F

                                          Exterior reversed
                                        F - B - C - D - E - A

    Reversing the order of either interior or exterior completes the 2-opt.
	Though the direction of the sequence is different in between these cases,
	the geometry of the Tour remains the same; &quot;unknotting&quot; any crossed paths.

--------------------------------------------------------------------------------
3-Opt: MOVE operation

	Move a subsequence to a new position within the same Tour; treating the
    segment as a single location in the larger sequence.

    i       Starting index of the segment
    l       Segment length
    shift   Where to shift to the new position

    Cut the segment from the old sequence, and build the new sequence by
    adding anything before the start index, the segment and then appending any
    remaining Locations in the old sequence that weren't in the segment.

                  Length 3
                  Segment         3-OPT MOVE           Shift   New position
             ____/__              SHIFT BY 1          /   ____/__
            |       |               -----&gt;           |   |       |
    A - B - C - D - E - F - G                A - B - F - C - D - E - G
                        1
                        |
                       /
                  Shift


                  Length 3
                  Segment         3-OPT MOVE             Shift     New position
             ____/___             SHIFT BY 2          __/_    ____/___
            |       |               -----&gt;           |   |   |       |
    A - B - C - D - E - F - G                A - B - F - G - C - D - E
                        1   2
                        |___|
                         /
                    Shift

--------------------------------------------------------------------------------
3-Opt: SPLIT operation

    Split a subsequence of a Tour off into another Tour (can be empty).
    Much like the MOVE operation, we extract a subsequnce of a specified length
    from the first Tour and put it somewhere in the destination Tour.
    The resulting Tours should begin at the same location if not roundtrip.

    i       Starting index of segment
    l       Segment length
    j       Insertion index in destination Tour


              Length 3
              Segment         3-OPT SPLIT      Original Tour
         ____/__              INTO NEW TOUR    A - E - F - G
        |       |               -----&gt;
    A - B - C - D - E - F - G                     New Tour
                        1                      A - B - C - D
                        |
                       /                     Total DISTANCE of Tours should
                  Shift                      follow the triangle inequality.

--------------------------------------------------------------------------------
4-Opt: SWAP operation ...
 
</code></pre>

<h3 id="source-code">Source code</h3>

<p><a href="https://github.com/jsyang/TSP-Heuristics">See code on GitHub</a></p>


    
    
          


<script src="http://www.statcounter.com/counter/counter_xhtml.js" async></script>
<noscript><img src="http://c.statcounter.com/5678638/0/29e623f2/1/"/></noscript>
  </div>
</div>

<div id="navigation">
</div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>